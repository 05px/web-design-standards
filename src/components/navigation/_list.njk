{% macro nav_list(links, subclass) %}
{% for item in links %}
  <li>
    <a href="{{ item.href }}"{% if item.current %} class="usa-current"{% endif %}>
      {{ item.text }}
    </a>
    {% if item.current and item.links %}
    <ul class="{{ subclass }}">
      {{ nav_list(item.links, subclass) }}
    </ul>
    {% endif %}
  </li>
{% endfor %}
{% endmacro %}

{% macro nav_accordion(sections, klass, subclass) %}
{% for section in sections %}
<li>
  {% if section.links %}
  <button class="usa-accordion-button" aria-controls="{{ section.id }}">
    {{ section.text | default(section.title) }}
  </button>
  <ul id="{{ section.id }}" class="{{ subclass }}">
    {{ nav_list(section.links, subclass, subclass) }}
  </ul>
  {% else %}
  <a href="{{ section.href }}"{% if section.current %} class="usa-current"{% endif %}>
    {{ section.text | default(section.title) }}
  </a>
  {% endif %}
</li>
{% endfor %}
{% endmacro %}
